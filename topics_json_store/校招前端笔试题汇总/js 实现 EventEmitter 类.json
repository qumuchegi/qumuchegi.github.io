{"title":"js 实现 EventEmitter 类","articleTopic":"校招前端笔试题汇总","content":"欢聚时代三道笔试题：\n### 1.  箭头函数和普通函数的区别\n\n\n\n\n### 2. 移除数组中给与定数相等的元素，返回新数组，不改变原来数组\n这道题直接使用 filter () 过滤返回即可\n\n\n### 3.  js 实现 EventEmitter 类，包括 on、once、off、emit方法\n\n\n\n\n```js\n/**\n * js 实现 EventEmitter 类，包括 on、once、off、emit方法\n */\n/**\n * js 实现 EventEmitter 类\n */\n\n\nclass EventEmitter{\n  constructor(){\n      this.channelQueue = []\n  }\n  on(channel, cb){\n      this._remove(channel)\n      this.channelQueue.push({channel,cb,isOnce: false})\n  }\n  off(channel){\n      this._remove(channel)\n  }\n  once(channel,cb){\n      this._remove(channel)\n      this.channelQueue.push({channel,cb,isOnce: true})\n  }\n  emit(channel){\n      if(!this._find(channel)) {\n        return console.log( Error('调用超出限制！') )\n      }else{\n        let {cb, isOnce} = this._find(channel)\n        if(isOnce){\n            this.off(channel)\n        }\n        cb()\n      }\n  }\n  _find(channel){\n      let filtered = this.channelQueue.filter(item=>item.channel===channel)\n      if(filtered.length===0) return null\n      return filtered[0]\n  }\n  _remove(channel){\n      this.channelQueue = this.channelQueue.filter(item=>item.channel!==channel)\n  }\n}\n\n\nlet eventTarget = new EventEmitter()\n\n\neventTarget.on('1',()=>{\n  console.log('回调1')\n})\neventTarget.once('2',()=>{\n  console.log('回调2')\n})\neventTarget.emit('1')\neventTarget.emit('1')\neventTarget.emit('1')\neventTarget.emit('2')\neventTarget.emit('2')\n\n\n```\n\n\n执行输出：\n\n\n```js\n回调1\n回调1\n回调1\n回调2\nError: 调用超出限制！\n    at EventEmitter.emit (/Users/qumuchege/Desktop/笔试文件夹/js-eventEmitter.js:22:29)\n    at Object.<anonymous> (/Users/qumuchege/Desktop/笔试文件夹/js-eventEmitter.js:53:13)\n    at Module._compile (internal/modules/cjs/loader.js:956:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)\n    at Module.load (internal/modules/cjs/loader.js:812:32)\n    at Function.Module._load (internal/modules/cjs/loader.js:724:14)\n    at Function.Module.runMain (internal/modules/cjs/loader.js:1025:10)\n    at internal/main/run_main_module.js:17:11\n```\n\n"}